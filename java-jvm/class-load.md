# 类 加载

## 七个阶段
* 加载
```md
在这个阶段，JVM 的主要目的是将字节码从各个位置（网络、磁盘等）转化为二进制字节流加载到内存中。
接着会为这个类在 JVM 的方法区创建一个对应的 Class 对象，这个 Class 对象就是这个类各种数据的访问入口。
（一句话，就是把代码数据加载到内存中）
```
* 验证
```md
只有符合 JVM 字节码规范的文件才能被 JVM 正确执行。

* JVM规范校验
* 代码逻辑校验
```
* 准备
```md
JVM 便会开始为 「类变量（static 修饰的变量）」 分配内存并初始化。

* 注意
1. 这里类变量的初始化指的是为变量赋予 Java 语言中该数据类型的零值，
  而不是用户代码里初始化的值。
  但如果一个变量是常量（被 static final 修饰）的话，
  那么在准备阶段，属性便会被赋予用户希望的值。
2. 「类成员变量」的内存分配需要等到初始化阶段才开始。
```
* 解析
```md
JVM 针对类或接口、字段、类方法、接口方法、方法类型、方法句柄和调用点限定符 7 类引用进行解析。
主要任务是将其在常量池中的符号引用替换成直接其在内存中的直接引用。
```
* 初始化
```md
到了初始化阶段，用户定义的 Java 程序代码才真正开始执行。
在这个阶段，JVM 会根据语句执行顺序对类对象进行初始化。
```
* 使用
```md
当 JVM 完成初始化阶段之后，JVM 便开始从入口方法开始执行用户的程序代码。
```
* 卸载
```md
当用户程序代码执行完毕后，JVM 便开始销毁创建的 Class 对象，最后负责运行的 JVM 也退出内存。
```

## 如何分析类的执行顺序？
* 确定类变量的初始值
* 初始化入口方法
* 初始化类构造器
* 初始化对象构造器

## 参考
* [透彻解析Java类加载机制](https://mp.weixin.qq.com/s?__biz=MzAxMjEwMzQ5MA==&mid=2448886478&idx=1&sn=0a1ff147078ca37573bba768ac982374&chksm=8fb550e3b8c2d9f5b68a62cef3b66c04ce878c1817127f5204b9d6628c0ed2fe986876590d47&token=1605421667&lang=zh_CN##)